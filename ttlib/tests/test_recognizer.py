'''
Created on Jul 14, 2016

@author: jivan
'''
import pytest
from ttlib.recognizer import ToneRecognizer

class TestToneRecognizer:
    sample_characteristics = {
        'weightedfreq12-18': 442.735465785933, 'weightedfreq22-18': 2215.73355457228, 'weightedfreq12-28': 431.194382100391, 'weightedfreq22-28': 2140.46485246903, 'weightedfreq12-38': 488.379376301174, 'weightedfreq22-38': 2118.75882253772, 'weightedfreq12-48': 534.633920455396, 'weightedfreq22-48': 2030.35324712806, 'weightedfreq12-58': 499.0783038363, 'weightedfreq22-58': 2141.53195685263, 'weightedfreq12-68': 458.379337289004, 'weightedfreq22-68': 2001.39526853501, 'weightedfreq12-78': 457.568812135052, 'weightedfreq22-78': 2133.43826839602, 'weightedfreq12-88': 481.572926025397, 'weightedfreq22-88': 2155.49149398239, 'wfreqchange12-128':-11.541083685542, 'wfreqchange22-128':-75.2687021032498, 'wfreqchange12-238': 57.184994200783, 'wfreqchange22-238':-21.7060299313102, 'wfreqchange12-348': 46.2545441542221, 'wfreqchange22-348':-88.4055754096598, 'wfreqchange12-458':-35.555616619096, 'wfreqchange22-458': 111.17870972457, 'wfreqchange12-568':-40.698966547296, 'wfreqchange22-568':-140.13668831762, 'wfreqchange12-678':-0.810525153952028, 'wfreqchange22-678': 132.04299986101, 'wfreqchange12-788': 24.004113890345, 'wfreqchange22-788': 22.05322558637, 'sigfreq12-18': 347.965428235239, 'sigfreq22-18': 2213.36474761677, 'sigfreq12-28': 366.541496500063, 'sigfreq22-28': 2132.68567893334, 'sigfreq12-38': 404.992817737567, 'sigfreq22-38': 2112.29691382819, 'sigfreq12-48': 378.184007800412, 'sigfreq22-48': 2019.84965945431, 'sigfreq12-58': 379.165626944359, 'sigfreq22-58': 2141.53195685263, 'sigfreq12-68': 399.648678979048, 'sigfreq22-68': 1961.42593319182, 'sigfreq12-78': 387.103147756983, 'sigfreq22-78': 2133.43826839602, 'sigfreq12-88': 394.93237555734, 'sigfreq22-88': 2155.49149398239, 'maxfreq18': 180.885972108285, 'maxfreq28': 506.065573770492, 'maxfreq38': 506.480721903199, 'maxfreq48': 361.475409836066, 'maxfreq58': 397.622950819672, 'maxfreq68': 434.126333059885, 'maxfreq78': 253.032786885246, 'maxfreq88': 253.032786885246, 'freqchange128': 325.179601662207, 'freqchange238': 0.415148132707031, 'freqchange348':-145.005312067133, 'freqchange458': 36.147540983606, 'freqchange568': 36.503382240213, 'freqchange678':-181.093546174639, 'freqchange788': 0, 'maxvolume': 31069, 'maxvolume18': 21101, 'maxvolume28': 28082, 'maxvolume38': 28866, 'maxvolume48': 28869, 'maxvolume58': 31069, 'maxvolume68': 27190, 'maxvolume78': 11014, 'maxvolume88': 4598, 'volumechange128': 6981, 'volumechange238': 784, 'volumechange348': 3, 'volumechange458': 2200, 'volumechange568':-3879, 'volumechange678':-16176, 'volumechange788':-6416, 'tksnack-pitch-18': 0, 'tksnack-pitch-28': 170.333333333333, 'tksnack-pitch-38': 168.5, 'tksnack-pitch-48': 175, 'tksnack-pitch-58': 190.5, 'tksnack-pitch-68': 208.333333333333, 'tksnack-pitch-78': 219.5, 'tksnack-pitch-88': 239, 'tksnack-pitch-change-128': 170.333333333333, 'tksnack-pitch-change-238':-1.833333333333, 'tksnack-pitch-change-348': 6.5, 'tksnack-pitch-change-458': 15.5, 'tksnack-pitch-change-568': 17.833333333333, 'tksnack-pitch-change-678': 11.166666666667, 'tksnack-pitch-change-788': 19.5, 'tksnack-formant1-18': 432.067367553711, 'tksnack-formant2-18': 1317.22399902344, 'tksnack-formant1-28': 415.161392211914, 'tksnack-formant2-28': 1764.76330566406, 'tksnack-formant1-38': 413.491271972656, 'tksnack-formant2-38': 1930.71057128906, 'tksnack-formant1-48': 367.994862874349, 'tksnack-formant2-48': 1665.39404296875, 'tksnack-formant1-58': 377.522857666016, 'tksnack-formant2-58': 1125.15441894531, 'tksnack-formant1-68': 412.880157470703, 'tksnack-formant2-68': 955.971527099609, 'tksnack-formant1-78': 372.325119018555, 'tksnack-formant2-78': 627.639526367188, 'tksnack-formant1-88': 296.80322265625, 'tksnack-formant2-88': 657.099039713542, 'tksnack-formant1-change-128':-16.905975341797, 'tksnack-formant1-change-238':-1.67012023925798, 'tksnack-formant1-change-348':-45.496409098307, 'tksnack-formant1-change-458': 9.52799479166703, 'tksnack-formant1-change-568': 35.357299804687, 'tksnack-formant1-change-678':-40.555038452148, 'tksnack-formant1-change-788':-75.521896362305, 'tksnack-formant2-change-128': 447.53930664062, 'tksnack-formant2-change-238': 165.947265625, 'tksnack-formant2-change-348':-265.31652832031, 'tksnack-formant2-change-458':-540.23962402344, 'tksnack-formant2-change-568':-169.182891845701, 'tksnack-formant2-change-678':-328.332000732421, 'tksnack-formant2-change-788': 29.459513346354,
    }

    expected_tone = 2

    def test_get_tone(self):
        tr = ToneRecognizer()
        tone = tr.get_tone(self.sample_characteristics)
        assert tone == self.expected_tone
